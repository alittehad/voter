<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Election Voter List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            transition: 0.3s;
        }
        h2{text-align:center;}

        .theme-btns {
            text-align: center;
            margin-bottom: 10px;
        }
        .theme-btns button {
            padding:10px;
            margin:5px;
            cursor:pointer;
            border-radius:8px;
        }

        #searchBox{
            width:90%;
            padding:10px;
            margin:10px auto;
            display:block;
            font-size:18px;
            border-radius:10px;
        }

        table {
            width: 95%;
            margin:auto;
            border-collapse: collapse;
            font-size:18px;
        }
        th, td {
            padding: 10px;
            border-bottom: 2px solid gray;
            cursor: pointer;
        }

        /* Popup Card */
        #popup {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width:350px;
            padding:20px;
            background:white;
            border-radius:15px;
            display:none;
            box-shadow:0px 0px 25px rgba(0,0,0,0.3);
            animation: zoom .3s ease-in-out;
        }
        @keyframes zoom{from{scale:0.3;}to{scale:1;}}

        #popup button {
            width:100%;
            padding:10px;
            border-radius:10px;
            margin-top:5px;
            cursor:pointer;
        }

        .close-btn {
            background:red;
            color:white;
        }

    </style>
</head>
<body>

<h2>üìã Election Voter List</h2>

<!-- Theme Controls -->
<div class="theme-btns">
    <button onclick="changeTheme('#f44336', 'white')">üî¥ Red</button>
    <button onclick="changeTheme('#2196F3', 'white')">üîµ Blue</button>
    <button onclick="changeTheme('#4CAF50', 'white')">üü¢ Green</button>
</div>

<input type="text" id="searchBox" placeholder="üîç ‡§ñ‡•ã‡§ú‡•á: ‡§®‡§æ‡§Æ / EPIC No / Part No">

<table id="voterTable"></table>

<!-- Popup -->
<div id="popup"></div>

<script>

// -------- JSON DATA ----------
const data = {
  "Voters": {
    "Bcd0598334": {
      "Epic": "BCD0598334",
      "Name": "Sanjay Malakar",
      "AcNo": 131,
      "PartNo": 92,
      "Description": "Active Voter",
      "Images": []
    },
    "Djm1162627": {
      "Epic": "DJM1162627",
      "Name": "Jagdish Gajanan Gurav",
      "AcNo": 131,
      "PartNo": 237,
      "Description": "Regular Voter",
      "Images": []
    },
    "Ltv1989003": {
      "Epic": "LTV1989003",
      "Name": "Jayprakash Gopal Shende",
      "AcNo": 131,
      "PartNo": 14,
      "Description": "Senior Citizen",
      "Images": []
    }
  }
};


// Load Table
function loadTable(){
    const table = document.getElementById("voterTable");
    table.innerHTML = `
        <tr><th>EPIC</th><th>Name</th><th>AC</th><th>Part No</th></tr>
    `;

    for(let id in data.Voters){
        let v = data.Voters[id];
        table.innerHTML += `
        <tr onclick="showPopup('${id}')">
            <td>${v.Epic}</td>
            <td>${v.Name}</td>
            <td>${v.AcNo}</td>
            <td>${v.PartNo}</td>
        </tr>`;
    }
}
loadTable();


// Search Filter
document.getElementById("searchBox").addEventListener("keyup", function(){
    let filter = this.value.toLowerCase();
    let rows = document.querySelectorAll("#voterTable tr");
    
    rows.forEach((row, index)=>{
        if(index===0) return; 
        row.style.display = row.innerText.toLowerCase().includes(filter) ? "" : "none";
    });
});


// Popup Display
function showPopup(id){
    let v = data.Voters[id];
    const popup = document.getElementById("popup");

    popup.innerHTML = `
        <h3>ü™™ Voter Card</h3>
        <p><b>Name:</b> ${v.Name}</p>
        <p><b>EPIC:</b> ${v.Epic}</p>
        <p><b>AC No:</b> ${v.AcNo}</p>
        <p><b>Part No:</b> ${v.PartNo}</p>
        <p><b>Description:</b> ${v.Description || "NA"}</p>
        <button onclick="window.print()">üñ® Print</button>
        <button onclick="shareWhatsapp('${v.Name}','${v.Epic}')">üì© WhatsApp</button>
        <button class="close-btn" onclick="closePopup()">‚ùå Close</button>
    `;
    popup.style.display = "block";
}

function closePopup(){ document.getElementById("popup").style.display="none"; }


// WhatsApp Share
function shareWhatsapp(name, epic){
    let msg = `Voter Information:%0AName: ${name}%0AEPIC: ${epic}`;
    window.open(`https://wa.me/?text=${msg}`, "_blank");
}


// Theme Changing
function changeTheme(color, textColor){
    document.body.style.background = color;
    document.body.style.color = textColor;

    document.querySelectorAll("td,th").forEach(el=>{
        el.style.borderColor = textColor;
    });

    document.querySelectorAll("tr").forEach(el=>{
        el.style.color = textColor;
    });
}

</script>

</body>
</html>
