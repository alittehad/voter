<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voter List App</title>

<style>
    :root {
        --themeColor: #4caf50;
    }

    body {
        font-family: Arial, sans-serif;
        background: #f1f1f1;
        margin: 0;
    }

    header {
        background: var(--themeColor);
        color: white;
        padding: 12px;
        text-align: center;
        font-size: 22px;
        font-weight: bold;
    }

    .search-box {
        width: 90%;
        margin: 10px auto;
        padding: 10px;
        border-radius: 10px;
        border: 2px solid #999;
        display: block;
        font-size: 18px;
    }

    .list-item {
        background: white;
        margin: 8px;
        padding: 12px;
        border-radius: 10px;
        border-left: 6px solid var(--themeColor);
        cursor: pointer;
        font-size: 18px;
        transition: 0.3s;
    }

    .list-item:hover {
        background: #eeeeee;
        transform: scale(1.02);
    }

    /* POPUP */
    #popup {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        justify-content: center;
        align-items: center;
        padding: 10px;
    }

    .card {
        width: 90%;
        max-width: 350px;
        background: var(--themeColor);
        color: white;
        padding: 15px;
        border-radius: 18px;
        text-align: center;
        overflow-y: auto;
        max-height: 95vh;
        position: relative;
        animation: fadeIn .3s ease-in-out;
    }

    @keyframes fadeIn {
        from{transform:scale(0.7); opacity:0;}
        to{transform:scale(1); opacity:1;}
    }

    .close-btn {
        position: absolute;
        top: 5px;
        right: 10px;
        font-size: 24px;
        cursor: pointer;
    }

    .img-preview {
        width: 120px;
        height: 120px;
        border-radius: 8px;
        border: 2px solid white;
        margin: 10px auto;
        object-fit: cover;
        display: block;
    }

    .btn {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        margin-top: 8px;
        background: white;
        color: black;
        border: none;
        font-weight: bold;
        cursor: pointer;
        font-size: 17px;
    }

    .color-box {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin: 10px 0;
    }

    .color-option {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid #fff;
    }

    textarea {
        width: 100%;
        height: 70px;
        margin-top: 8px;
        padding: 8px;
        border-radius: 10px;
        font-size: 15px;
        border: none;
    }

    @media print {
        .close-btn,.btn,.color-box,#search,.list-item,textarea,input[type="file"]{
            display:none !important;
        }
        #popup{
            display:block !important;
            background:white !important;
            position:static;
        }
        .card{
            max-width:100% !important;
            width:100% !important;
            background:white !important;
            color:black !important;
            border:2px solid black;
        }
    }
</style>
</head>

<body>

<header>üìã Voter List</header>

<input type="text" id="search" class="search-box" placeholder="Search Name / EPIC">

<div id="list"></div>

<!-- Popup -->
<div id="popup" onclick="outsideClose(event)">
    <div class="card" id="cardBox">
        <span class="close-btn" onclick="closePopup()">‚úñ</span>

        <img id="voterImg" class="img-preview" src="">

        <input type="file" id="uploadImg" accept="image/*" onchange="uploadImage(event)" class="btn">

        <h2 id="pName"></h2>
        <p><b>üÜî EPIC:</b> <span id="pEpic"></span></p>
        <p><b>üèõ AC No:</b> <span id="pAc"></span></p>
        <p><b>üìç Part No:</b> <span id="pPart"></span></p>
        <p><b>üè† Address:</b> <span id="pAddress"></span></p>
        <p><b>üó≥ Booth:</b> <span id="pVoteAddress"></span></p>

        <h3>üé® Theme</h3>
        <div class="color-box">
            <div class="color-option" style="background:#4caf50" onclick="changeColor('#4caf50')"></div>
            <div class="color-option" style="background:#2196f3" onclick="changeColor('#2196f3')"></div>
            <div class="color-option" style="background:#ff5722" onclick="changeColor('#ff5722')"></div>
        </div>

        <textarea id="senderNote" placeholder="Sender message..."></textarea>

        <button class="btn" onclick="printCard()">üñ® Print</button>
        <button class="btn" onclick="sendWhatsApp()">üì© WhatsApp</button>
    </div>
</div>

<script>
const data={
 "BCD0598334":{Name:"Sanjay Malakar",Ac:131,Part:92,Address:"Nalasopara",Vote:"Vasai Booth 45"},
 "DJM1162627":{Name:"Jagdish Gurav",Ac:131,Part:237,Address:"Virar",Vote:"Booth 18"},
 "LTV1989003":{Name:"Jayprakash Shende",Ac:131,Part:14,Address:"Bolinj",Vote:"Booth 22"}
};

let selected;

function loadList(){
  let list=document.getElementById("list");
  list.innerHTML="";
  for(let key in data){
      let v=data[key];
      let d=document.createElement("div");
      d.className="list-item";
      d.innerHTML=`<b>${v.Name}</b><br>üÜî ${key}`;
      d.onclick=()=>openPopup(key,v);
      list.appendChild(d);
  }
}
loadList();

function openPopup(id,v){
  selected={id,...v};
  document.getElementById("pName").innerText=v.Name;
  document.getElementById("pEpic").innerText=id;
  document.getElementById("pAc").innerText=v.Ac;
  document.getElementById("pPart").innerText=v.Part;
  document.getElementById("pAddress").innerText=v.Address;
  document.getElementById("pVoteAddress").innerText=v.Vote;

  document.getElementById("voterImg").src=localStorage.getItem(id) || "";
  document.getElementById("popup").style.display="flex";
}

function uploadImage(e){
  let url=URL.createObjectURL(e.target.files[0]);
  document.getElementById("voterImg").src=url;
  localStorage.setItem(selected.id,url);
}

function changeColor(c){
  document.documentElement.style.setProperty("--themeColor",c);
}

function closePopup(){
  document.getElementById("popup").style.display="none";
}

function outsideClose(e){
  if(e.target.id==="popup") closePopup();
}

function printCard(){window.print();}

function sendWhatsApp(){
  let msg=`üìå VOTER DETAILS\n\nüë§ ${selected.Name}\nüÜî ${selected.id}\nAC: ${selected.Ac}\nPart: ${selected.Part}\nüè† ${selected.Address}\nüó≥ Booth: ${selected.Vote}\n\nüì© Sender:\n${document.getElementById("senderNote").value}`;
  window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
}

document.getElementById("search").addEventListener("input",()=>{
 let v=document.getElementById("search").value.toLowerCase();
 document.querySelectorAll(".list-item").forEach(i=>{
  i.style.display=i.innerText.toLowerCase().includes(v)?"block":"none";
 });
});
</script>

</body>
</html>
