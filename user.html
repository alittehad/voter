<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Election Voter List</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding-bottom:50px;
    }
    h2{text-align:center;}

    #searchBox {
        width:90%;
        padding:12px;
        margin:15px auto;
        display:block;
        font-size:18px;
        border-radius:10px;
        border: 2px solid gray;
    }

    table {
        width: 95%;
        margin:auto;
        border-collapse: collapse;
        font-size:18px;
    }

    th, td {
        padding:10px;
        border-bottom: 2px solid gray;
        cursor:pointer;
    }

    tr:hover {background:#eee;}

    /* Popup Card */
    #popup {
        position:fixed;
        top:50%; left:50%;
        transform: translate(-50%, -50%);
        width:360px;
        padding:20px;
        background:white;
        border-radius:15px;
        display:none;
        box-shadow:0px 0px 25px rgba(0,0,0,0.3);
        animation: zoom .3s ease-in-out;
    }
    @keyframes zoom{from{scale:0.4;}to{scale:1;}}

    #popup button {
        width:100%;
        padding:10px;
        border-radius:10px;
        margin-top:7px;
        cursor:pointer;
        font-size:16px;
    }

    .close-btn{
        background:red;
        color:white;
    }

    .color-btns{
        display:flex;
        justify-content: space-between;
        margin:10px 0;
    }
    .color-btns button{
        width:30%;
        padding:8px;
        border-radius:10px;
        cursor:pointer;
    }

</style>
</head>
<body>

<h2>üìã Election Voter List</h2>

<input type="text" id="searchBox" placeholder="üîç ‡§ñ‡•ã‡§ú‡•á‡§Ç: ‡§®‡§æ‡§Æ / EPIC ‡§®‡§Ç‡§¨‡§∞ / Part No">

<table id="voterTable"></table>

<div id="popup"></div>

<script>

// JSON DATA
const data = {
  "Voters": {
    "Bcd0598334": {
      "Epic": "BCD0598334",
      "Name": "Sanjay Malakar",
      "AcNo": 131,
      "PartNo": 92,
      "Description": "Active Voter",
      "Images": []
    },
    "Djm1162627": {
      "Epic": "DJM1162627",
      "Name": "Jagdish Gajanan Gurav",
      "AcNo": 131,
      "PartNo": 237,
      "Description": "Regular Voter",
      "Images": []
    },
    "Ltv1989003": {
      "Epic": "LTV1989003",
      "Name": "Jayprakash Gopal Shende",
      "AcNo": 131,
      "PartNo": 14,
      "Description": "Senior Citizen",
      "Images": []
    }
  }
};

let currentColor = "gray";

function loadTable(){
    const table = document.getElementById("voterTable");
    table.innerHTML = `
        <tr><th>EPIC</th><th>Name</th><th>AC</th><th>Part No</th></tr>
    `;

    for(let id in data.Voters){
        let v = data.Voters[id];
        table.innerHTML += `
        <tr onclick="showPopup('${id}')">
            <td>${v.Epic}</td>
            <td>${v.Name}</td>
            <td>${v.AcNo}</td>
            <td>${v.PartNo}</td>
        </tr>`;
    }
}
loadTable();

document.getElementById("searchBox").addEventListener("keyup", function(){
    let filter = this.value.toLowerCase();
    document.querySelectorAll("#voterTable tr").forEach((row, i)=>{
        if(i === 0) return;
        row.style.display = row.innerText.toLowerCase().includes(filter) ? "" : "none";
    });
});


function showPopup(id){
    let v = data.Voters[id];
    const popup = document.getElementById("popup");

    popup.style.border = `4px solid ${currentColor}`;

    popup.innerHTML = `
        <h3 style="text-align:center">ü™™ Voter Information</h3>

        <p><b>Name:</b> ${v.Name}</p>
        <p><b>EPIC:</b> ${v.Epic}</p>
        <p><b>AC No:</b> ${v.AcNo}</p>
        <p><b>Part No:</b> ${v.PartNo}</p>
        <p><b>Note:</b> ${v.Description}</p>

        <div class="color-btns">
            <button style="background:#ff7675" onclick="changeColor('#ff7675')">Red</button>
            <button style="background:#74b9ff" onclick="changeColor('#74b9ff')">Blue</button>
            <button style="background:#55efc4" onclick="changeColor('#55efc4')">Green</button>
        </div>

        <button onclick="window.print()">üñ® Print</button>
        <button onclick="shareWhatsapp('${v.Name}','${v.Epic}')">üì© WhatsApp</button>
        <button class="close-btn" onclick="closePopup()">‚ùå Close</button>
    `;

    popup.style.display = "block";
}

function changeColor(color){
    currentColor = color;
    document.querySelectorAll("td, th").forEach(el=>{
        el.style.borderBottom = `2px solid ${color}`;
    });
    document.getElementById("popup").style.border = `4px solid ${color}`;
}

function closePopup(){ document.getElementById("popup").style.display="none"; }

function shareWhatsapp(name, epic){
    let msg = `Voter Detail:%0AName: ${name}%0AEPIC: ${epic}`;
    window.open(`https://wa.me/?text=${msg}`, "_blank");
}

</script>
</body>
</html>
