<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voter List App</title>

<style>
    :root {
        --themeColor: #4caf50;
    }

    body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        margin: 0;
    }

    header {
        background: var(--themeColor);
        color: white;
        padding: 15px;
        font-size: 22px;
        text-align: center;
        font-weight: bold;
    }

    .search-box {
        width: 90%;
        display: block;
        margin: 15px auto;
        padding: 12px;
        font-size: 18px;
        border-radius: 10px;
        border: 2px solid #999;
    }

    .list-item {
        background: white;
        margin: 10px;
        padding: 14px;
        border-radius: 12px;
        cursor: pointer;
        border-left: 6px solid var(--themeColor);
        transition: 0.3s;
    }

    .list-item:hover {
        transform: scale(1.03);
    }

    #popup {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
        padding: 10px;
        overflow-y: auto;
    }

    .card {
        background: var(--themeColor);
        width: 100%;
        max-width: 480px;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        color: white;
        position: relative;
    }

    .close-btn {
        position: absolute;
        top: 6px; right: 10px;
        cursor: pointer;
        font-size: 28px;
        font-weight: bold;
    }

    .img-preview {
        width: 140px;
        height: 140px;
        border-radius: 8px;
        border: 2px solid white;
        object-fit: cover;
        display: block;
        margin: 10px auto;
    }

    .btn {
        width: 100%;
        padding: 13px;
        margin-top: 10px;
        background: white;
        color: black;
        font-size: 18px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 3px 3px 6px rgba(0,0,0,0.2);
    }

    .color-box {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-top: 10px;
    }

    .color-option {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid #fff;
    }

    @media print {
        .close-btn, .btn, .color-box, #search, .list-item, input[type="file"], textarea {
            display: none !important;
        }

        #popup { position: static; background: white; }
        .card { background:white !important; color:black !important; border:2px solid black; }
        .img-preview { border:2px solid black; }
    }
</style>
</head>

<body>

<header>üìã Voter List</header>

<input type="text" id="search" class="search-box" placeholder="Search by Name / EPIC...">

<div id="list"></div>

<!-- Popup -->
<div id="popup">
    <div class="card" id="cardBox">
        <span class="close-btn" onclick="closePopup()">‚úñ</span>

        <img id="voterImg" class="img-preview" src="" alt="No Image">

        <input type="file" id="uploadImg" accept="image/*" onchange="uploadImage(event)" class="btn">

        <h2 id="pName"></h2>
        <p><b>üÜî EPIC:</b> <span id="pEpic"></span></p>
        <p><b>üèõ AC No:</b> <span id="pAc"></span></p>
        <p><b>üìç Part No:</b> <span id="pPart"></span></p>
        <p><b>üè† Address:</b> <span id="pAddress"></span></p>
        <p><b>üó≥ Voting Address:</b> <span id="pVoteAddress"></span></p>

        <h3>üé® Change Theme</h3>
        <div class="color-box">
            <div class="color-option" style="background:#4caf50" onclick="changeColor('#4caf50')"></div>
            <div class="color-option" style="background:#2196f3" onclick="changeColor('#2196f3')"></div>
            <div class="color-option" style="background:#ff5722" onclick="changeColor('#ff5722')"></div>
        </div>

        <textarea id="senderNote" placeholder="Sender message..." style="width:100%;height:80px;margin-top:12px;border-radius:10px;padding:10px;font-size:16px;"></textarea>

        <button class="btn" onclick="printCard()">üñ® Print</button>
        <button class="btn" onclick="sendWhatsApp()">üì© Share WhatsApp</button>
    </div>
</div>

<script>
const data = {
  "Bcd0598334": {Epic:"BCD0598334",Name:"Sanjay Malakar",AcNo:131,PartNo:92,Address:"Nalasopara",VotingAddress:"Vasai Booth No 45"},
  "Djm1162627": {Epic:"DJM1162627",Name:"Jagdish Gurav",AcNo:131,PartNo:237,Address:"Virar",VotingAddress:"Booth 18"},
  "Ltv1989003": {Epic:"LTV1989003",Name:"Jayprakash Shende",AcNo:131,PartNo:14,Address:"Bolinj",VotingAddress:"Booth 22"}
};

let selected = null;

function loadList() {
  document.getElementById("list").innerHTML = "";
  for (let k in data) {
      let v = data[k];
      let div = document.createElement("div");
      div.className = "list-item";
      div.innerHTML = `<b>${v.Name}</b><br>üÜî ${v.Epic}`;
      div.onclick = () => openPopup(v);
      document.getElementById("list").appendChild(div);
  }
}
loadList();

function openPopup(v) {
  selected=v;
  document.getElementById("pName").innerText=v.Name;
  document.getElementById("pEpic").innerText=v.Epic;
  document.getElementById("pAc").innerText=v.AcNo;
  document.getElementById("pPart").innerText=v.PartNo;
  document.getElementById("pAddress").innerText=v.Address;
  document.getElementById("pVoteAddress").innerText=v.VotingAddress;
  document.getElementById("voterImg").src=localStorage.getItem(v.Epic) || "";

  document.getElementById("popup").style.display="flex";
}

function uploadImage(e){
    if(selected){
        const url=URL.createObjectURL(e.target.files[0]);
        document.getElementById("voterImg").src=url;
        localStorage.setItem(selected.Epic,url);
    }
}

function closePopup(){ document.getElementById("popup").style.display="none"; }

function changeColor(color){ document.documentElement.style.setProperty("--themeColor",color); }

function printCard(){ window.print(); }

function sendWhatsApp(){
  const note=document.getElementById("senderNote").value||"No message";
  let msg=`üìå Voter Details:\n\nüë§ ${selected.Name}\nüÜî ${selected.Epic}\nüèõ AC No: ${selected.AcNo}\nüìç Part No: ${selected.PartNo}\nüè† Address: ${selected.Address}\nüó≥ Booth: ${selected.VotingAddress}\n\nüìù Sender: ${note}`;
  window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`,"_blank");
}

document.getElementById("search").addEventListener("input",()=>{
   let val=document.getElementById("search").value.toLowerCase();
   document.querySelectorAll(".list-item").forEach(i=>{
     i.style.display=i.innerText.toLowerCase().includes(val)?"block":"none";
   });
});
</script>

</body>
</html>
