<!DOCTYPE html>
<html lang="hi">
<head>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voter Panel - Ward 20</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
/* Full height, center everything */
body, html {
  margin:0; padding:0; height:100%; width:100%;
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  background: linear-gradient(to bottom right, #4f46e5, #ec4899, #facc15);
  font-family: sans-serif;
  gap:1rem; /* space between elements */
}

#content {
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  width:100%;
  max-width:500px; /* maximum width for large screens */
  padding:1rem;
  box-sizing:border-box;
}

.panel-img {
  width:100%;
  max-width:400px;
  height:auto;
  border-radius:1rem;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  margin-bottom:2rem;
}

/* Install Button 3D + colorful */
#installBtn {
  display:none;
  margin-bottom: 2rem;
  padding: 0.75rem 1.8rem;
  background: linear-gradient(45deg, #2563eb, #4ade80, #facc15);
  color: white;
  font-weight: bold;
  border-radius: 0.75rem;
  cursor: pointer;
  box-shadow: 0 8px 0 #1e40af;
  font-size: 1.1rem;
  transition: all 0.15s ease-in-out;
}
#installBtn:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 10px 0 #1e40af;
}
#installBtn:active {
  transform: translateY(4px) scale(0.98);
  box-shadow: 0 4px 0 #1e40af;
}

/* Panel Buttons */
.button-container {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:1rem;
  width:100%;
}

.btn-3d {
  flex:1 1 45%; /* responsive buttons, 2 per row on mobile */
  min-width:120px;
  max-width:180px;
  padding:0.75rem 1rem;
  border:none;
  border-radius:0.75rem;
  font-weight:bold;
  color:white;
  cursor:pointer;
  transition:0.1s;
  box-shadow:0 5px 0 rgba(0,0,0,0.25);
  text-align:center;
}
.btn-3d:hover { transform:translateY(-2px); }
.btn-3d:active { transform:translateY(3px); box-shadow:0 2px 0 rgba(0,0,0,0.25); }

.btn1{background-color:#3b82f6;}
.btn2{background-color:#ef4444;}
.btn3{background-color:#f59e0b;}
.btn4{background-color:#10b981;}
</style>
</head>
<body>

<div id="content">
  <!-- Install App Button -->
  <button id="installBtn">Install App</button>

  <!-- Panel Image -->
  <img src="https://i.postimg.cc/qRYkB8VT/khatik-imase.jpg" class="panel-img" />

  <!-- Panel Buttons -->
  <div class="button-container">
    <button class="btn-3d btn1" onclick="window.location.href='admin.html'">Voter List</button>
    <button class="btn-3d btn2" onclick="window.location.href='page2.html'">Button 2</button>
    <button class="btn-3d btn3" onclick="window.location.href='page3.html'">Button 3</button>
    <button class="btn-3d btn4" onclick="window.location.href='page4.html'">Button 4</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCdjqVFKOQ1dtaXCGFUUtsJWbFdGNTo-xw",
  authDomain: "voter-25c94.firebaseapp.com",
  databaseURL: "https://voter-25c94-default-rtdb.firebaseio.com",
  projectId: "voter-25c94",
  storageBucket: "voter-25c94.firebasestorage.app",
  messagingSenderId: "297773534400",
  appId: "1:297773534400:web:3722c487b8c83e9b787125"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();

// Firebase Auth check
onAuthStateChanged(auth, user => {
  if(!user){
    window.location.replace('index.html'); // redirect if not logged in
  } else {
    document.getElementById('content').style.display = 'flex'; // show panel
  }
});

// PWA Install Button logic
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('installBtn').style.display = 'block';
});

document.getElementById('installBtn').addEventListener('click', async () => {
  if(!deferredPrompt) return;
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  console.log('User response:', outcome);
  deferredPrompt = null;
  document.getElementById('installBtn').style.display = 'none';
});
</script>

</body>
</html>
