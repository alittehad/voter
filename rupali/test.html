<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>Voter List</title>

<style>
body{
  font-family: Arial, sans-serif;
  margin:0;
  padding:0;
  background:#f5f5f5;
}

header{
  background:#1e88e5;
  color:#fff;
  padding:10px;
  text-align:center;
  font-size:20px;
}

#list{
  padding:10px;
}

.card{
  background:#fff;
  border-radius:8px;
  padding:10px;
  margin-bottom:10px;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
  cursor:pointer;
}

.card strong{font-size:16px;}

#popup{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:center;
}

#popupContent{
  background:#fff;
  width:90%;
  max-width:380px;
  padding:15px;
  border-radius:10px;
}

.btn{
  width:100%;
  padding:10px;
  margin-top:8px;
  font-size:15px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

.print{background:#4caf50;color:#fff;}
.whatsapp{background:#25d366;color:#fff;}
.close{background:#f44336;color:#fff;}

.clock{
  font-size:30px;
  text-align:center;
  margin-bottom:10px;
}

/* PRINT FIX */
@media print{
  body{background:#fff;}
  header,#list,.btn{display:none;}
  #popup{display:block;position:static;background:none;}
  #popupContent{
    box-shadow:none;
    border:none;
    width:100%;
    max-width:100%;
    page-break-after:avoid;
  }
}
</style>
</head>

<body>

<header>‡§Æ‡§§‡§¶‡§æ‡§∞ ‡§Ø‡§æ‡§¶‡•Ä</header>

<div id="list">Loading...</div>

<!-- POPUP -->
<div id="popup">
  <div id="popupContent">
    <div class="clock">‚è∞</div>

    <div id="printArea"></div>

    <button class="btn print" onclick="doPrint()">üñ® Print</button>
    <button class="btn whatsapp" onclick="sendWhatsApp()">üì≤ WhatsApp</button>
    <button class="btn close" onclick="closePop()">‚ùå Close</button>
  </div>
</div>

<script>
/* SAMPLE DATA (CSV / Firebase ‡§∏‡•á replace ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•ã) */
const voters = [
  {
    name:"‡§¶‡§µ‡•á ‡§™‡§æ‡§∞‡•ç‡§• ‡§Ö‡§®‡§ø‡§≤",
    epic:"WEH5630116",
    house:"A/204",
    booth:"132",
    part:"237",
    relation:"‡§¶‡§µ‡•á ‡§Ö‡§®‡§ø‡§≤",
    age:"29",
    gender:"‡§™‡•Å‡§∞‡•Å‡§∑"
  }
];

let active = null;

/* LOAD LIST */
const listDiv = document.getElementById("list");
listDiv.innerHTML="";

voters.forEach((v,i)=>{
  const d=document.createElement("div");
  d.className="card";
  d.innerHTML=`<strong>${v.name}</strong><br>EPIC: ${v.epic}`;
  d.onclick=()=>openPop(v);
  listDiv.appendChild(d);
});

/* OPEN CARD */
function openPop(v){
  active=v;
  document.getElementById("printArea").innerHTML=`
    <b>‡§®‡§æ‡§µ:</b> ${v.name}<br>
    <b>EPIC:</b> ${v.epic}<br>
    <b>‡§ò‡§∞ ‡§®‡§Ç:</b> ${v.house}<br>
    <b>‡§¨‡•Ç‡§•:</b> ${v.booth}<br>
    <b>‡§≠‡§æ‡§ó:</b> ${v.part}<br>
    <b>‡§∏‡§Ç‡§¨‡§Ç‡§ß:</b> ${v.relation}<br>
    <b>‡§µ‡§Ø / ‡§≤‡§ø‡§Ç‡§ó:</b> ${v.age} / ${v.gender}
  `;
  document.getElementById("popup").style.display="flex";
}

function closePop(){
  document.getElementById("popup").style.display="none";
}

/* PRINT */
function doPrint(){
  window.print();
}

/* WHATSAPP */
function sendWhatsApp(){
  if(!active)return;
  const msg =
`‚è∞ ‡§ò‡§°‡•Ä ‡§ï‡•ã ‡§ú‡§ø‡§§‡§æ‡§Ø‡•á

‡§Æ‡§§‡§¶‡§æ‡§∞ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä:
‡§®‡§æ‡§µ: ${active.name}
EPIC: ${active.epic}
‡§ò‡§∞ ‡§®‡§Ç: ${active.house}
‡§¨‡•Ç‡§•: ${active.booth}
‡§≠‡§æ‡§ó: ${active.part}

‡§Ü‡§™‡§≤‡•á ‡§¨‡§π‡•Å‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§Æ‡§§ ‡§ú‡§∞‡•Ç‡§∞ ‡§¶‡•ç‡§Ø‡§æ üôè`;

  window.open("https://wa.me/?text="+encodeURIComponent(msg));
}
</script>

</body>
</html>
