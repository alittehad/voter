<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Voter List Preview (Local Data)</title>
<style>
body { font-family: Arial; margin:0; padding:10px; background:#f3f3f3; }
h2 { text-align:center; margin-bottom:10px; font-size:16px; text-transform: lowercase; }
input, textarea, select {
    width:100%; padding:8px; margin-bottom:8px;
    border-radius:6px; border:1px solid #777; font-size:14px;
    text-transform: lowercase;
}
.list-item{
    padding:6px 8px; background:white;
    border:1px solid #aaa; margin-bottom:4px;
    border-radius:6px; cursor:pointer;
    transition:.2s; font-size:12px;
    text-transform: lowercase; line-height:1.3em;
    word-break: break-word;
}
.highlight { background: #ffe08a !important; border-color:#d6a300 !important; }
.list-item:hover{ transform:scale(1.03); box-shadow:0 0 6px gray; }

#popup{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.7);display:none;
    justify-content:center;align-items:flex-start;
    padding:20px;overflow-y:auto;
}
.card{
    width:95%;max-width:420px;background:white;
    border:3px solid black;border-radius:12px;padding:15px;
    font-size:13px; text-transform: lowercase;
}
.card img{
    width:100%;max-height:180px;object-fit:contain;
    border-radius:10px;margin-bottom:8px;
}
.btn{
    padding:10px;width:100%;margin-top:8px;background:#008cff;
    color:white;border:none;font-size:14px;cursor:pointer;
    border-radius:8px;box-shadow:0 3px 0 #003f7f;
}
.btn:active{ transform:translateY(3px); }
.close-btn{ background:red;box-shadow:0 3px 0 #7a0000; }
.color-btn{ background:#ffa600; box-shadow:0 3px 0 #b36b00; }

/* PRINT */
@media print{
    body *{ visibility:hidden; }
    #popup, #popup *{ visibility:visible; }
    .btn{ display:none !important; }
}
.lang-switch { text-align:center; margin-bottom:10px; }
.lang-switch select { padding:6px 10px; font-size:14px; border-radius:6px; border:1px solid #007bff; }
</style>
</head>
<body>

<div class="lang-switch">
  <select id="lang">
    <option value="mr">ЁЯЗоЁЯЗ│ рдорд░рд╛рдареА (Marathi)</option>
    <option value="en">ЁЯЗоЁЯЗ│ English</option>
  </select>
</div>

<div id="translateArea">
    <h2 class="label" data-mr="ЁЯЧ│ рдорддрджрд╛рд░ рдпрд╛рджреА рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди" data-en="ЁЯЧ│ Voter List Preview">ЁЯЧ│ рдорддрджрд╛рд░ рдпрд╛рджреА рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди</h2>
    <label class="label" data-mr="рдорддрджрд╛рддрд╛ рд╢реЛрдзрд╛" data-en="Search Voter:">рдорддрджрд╛рддрд╛ рд╢реЛрдзрд╛</label>
</div>

<input id="search" class="label" 
       data-mr="рдирд╛рд╡, EPIC, AC рдХреНрд░., рднрд╛рдЧ рдХреНрд░., рдкрддреНрддрд╛ рд╢реЛрдзрд╛" 
       data-en="Search Name, EPIC, AC No, Part No, Address, Booth, Message..."
       placeholder="рдирд╛рд╡, EPIC, AC рдХреНрд░., рднрд╛рдЧ рдХреНрд░., рдкрддреНрддрд╛ рд╢реЛрдзрд╛">

<div id="list"></div>

<div id="popup">
    <div class="card" id="cardBox">
        <h3 id="pName"></h3>
        <p><b class="label" data-mr="ЁЯЖФ EPIC рдХреНрд░рдорд╛рдВрдХ:" data-en="ЁЯЖФ EPIC:">ЁЯЖФ EPIC рдХреНрд░рдорд╛рдВрдХ:</b> <span id="pEpic"></span></p>
        <p><b class="label" data-mr="ЁЯПЫ рд╡рд┐рдзрд╛рдирд╕рднрд╛:" data-en="ЁЯПЫ AC No:">ЁЯПЫ рд╡рд┐рдзрд╛рдирд╕рднрд╛:</b> <span id="pAc"></span></p>
        <p><b class="label" data-mr="ЁЯУН рднрд╛рдЧ рдХреНрд░рдорд╛рдВрдХ:" data-en="ЁЯУН Part No:">ЁЯУН рднрд╛рдЧ рдХреНрд░рдорд╛рдВрдХ:</b> <span id="pPart"></span></p>
        <p><b class="label" data-mr="ЁЯПа рдкрддрд╛:" data-en="ЁЯПа Address:">ЁЯПа рдкрддрд╛:</b> <span id="pAddress"></span></p>
        <p><b class="label" data-mr="ЁЯЧ│ рдорддрджрд╛рди рдХреЗрдВрджреНрд░:" data-en="ЁЯЧ│ Booth:">ЁЯЧ│ рдорддрджрд╛рди рдХреЗрдВрджреНрд░:</b> <span id="pVoteAddress"></span></p>
        <p><b class="label" data-mr="ЁЯФЧ рд╕рдВрдмрдВрдз:" data-en="ЁЯФЧ Relation:">ЁЯФЧ рд╕рдВрдмрдВрдз:</b> <span id="pRelation"></span> (<span id="pRelationType"></span>)</p>
        <p><b class="label" data-mr="рдЖрдпреБ/рд▓рд┐рдВрдЧ:" data-en="Age/Gender:">рдЖрдпреБ/рд▓рд┐рдВрдЧ:</b> <span id="pAge"></span> / <span id="pGender"></span></p>

        <img id="voterImage" style="display:none; margin-top:10px;">

        <label class="label" data-mr="ЁЯУЭ рд╕рдВрджреЗрд╢:" data-en="ЁЯУЭ Sender Message:"><b>ЁЯУЭ рд╕рдВрджреЗрд╢:</b></label>
        <input id="senderNote" placeholder="рд╕рдВрджреЗрд╢ рдЯрд╛рдХрд╛ / Type message here">

        <button class="btn color-btn" onclick="highlightItem()">ЁЯОи рд╣рд╛рдпрд▓рд╛рдЗрдЯ / Highlight</button>
        <button class="btn" onclick="printDetails()">ЁЯЦи рдЫрд╛рдкрд╛ / Print</button>
        <button class="btn" onclick="sendWhatsApp()">ЁЯУй WhatsApp</button>
        <button class="btn close-btn" onclick="closePopup()">тЭМ рдмрдВрдж рдХрд░рд╛ / Close</button>
    </div>
</div>

<script>
// --- SAMPLE LOCAL JSON DATA ---
// Isme aap 20,000+ voters JSON load kar sakte ho
const voterData = {
  "general_info": {
    "date": "20-11-2025",
    "corporation": "Vasai Virar Municipal Corporation",
    "ward_no": "8 - Ward 8",
    "list_part_no": "272",
    "list_part_name": "1 - Dhanivgaonba-Hachapadadhanivaharwate"
  },
  "voters": [ /* aapka voter JSON data */ ]
};

let voters = voterData.voters;
let generalInfo = voterData.general_info;
let selected = null, activeListItem = null;

// Show filtered list only
function showList(data){
    const box = document.getElementById("list");
    box.innerHTML = "";
    if(data.length===0){
        box.innerHTML='<div style="text-align:center;padding:20px;color:red;">рдХреЛрдИ рдорддрджрд╛рддрд╛ рдирд╣реАрдВ рдорд┐рд▓рд╛ (No voters found).</div>';
        return;
    }
    // Render only 50 items max (pagination optional)
    data.slice(0,50).forEach(v=>{
        const div=document.createElement("div");
        div.className="list-item";
        div.innerHTML=`<b>${(v.voter_full_name||"").toLowerCase()}</b><br>
                       ЁЯЖФ ${(v.epic_no||"").toLowerCase()} | ЁЯПЫ AC:${generalInfo.list_part_no.split('/')[0]||"NA"} | ЁЯУН Part:${generalInfo.list_part_no||"NA"}`;
        div.onclick=()=>{ activeListItem=div; openPopup(v); };
        box.appendChild(div);
    });
}

// Open popup/card
function openPopup(v){
    selected=v;
    const acNo=v.sl_no_in_part.split('/')[0] || generalInfo.list_part_no.split('/')[0];
    const partNo=generalInfo.list_part_no;
    const votingAddress=generalInfo.list_part_name;

    document.getElementById("pName").innerText=(v.voter_full_name||"").toLowerCase();
    document.getElementById("pEpic").innerText=(v.epic_no||"").toLowerCase();
    document.getElementById("pAc").innerText=acNo;
    document.getElementById("pPart").innerText=partNo;
    document.getElementById("pAddress").innerText=(v.house_number||"NA").toLowerCase();
    document.getElementById("pVoteAddress").innerText=(votingAddress||"NA").toLowerCase();
    document.getElementById("pRelation").innerText=(v.relation_name||"NA").toLowerCase();
    document.getElementById("pRelationType").innerText=(v.relation_type||"NA").toLowerCase();
    document.getElementById("pAge").innerText=v.age||"NA";
    document.getElementById("pGender").innerText=v.gender||"NA";
    document.getElementById("senderNote").value="рдХреЛрдИ рд╕рдВрджреЗрд╢ рдирд╣реАрдВ (No message)";
    document.getElementById("voterImage").style.display="none";

    document.getElementById("popup").style.display="flex";
}

// Highlight
function highlightItem(){
    if(activeListItem) activeListItem.classList.toggle("highlight");
    document.getElementById("cardBox").classList.toggle("highlight");
}

// Close popup
function closePopup(){ document.getElementById("popup").style.display="none"; }

// Print
function printDetails(){ window.print(); }

// WhatsApp
function sendWhatsApp(){
    if(!selected) return;
    const acNo=selected.sl_no_in_part.split('/')[0] || generalInfo.list_part_no.split('/')[0];
    const partNo=generalInfo.list_part_no;
    const votingAddress=generalInfo.list_part_name;
    const senderMessage=document.getElementById("senderNote").value;

    const msg=`ЁЯСд Name: ${(selected.voter_full_name||"").toLowerCase()}
ЁЯЖФ EPIC: ${(selected.epic_no||"").toLowerCase()}
ЁЯПа House No: ${(selected.house_number||"NA").toLowerCase()}
ЁЯПЫ AC No: ${acNo}
ЁЯУН Part No: ${partNo}
ЁЯЧ│ Booth: ${votingAddress}
ЁЯФЧ Relation: ${(selected.relation_name||"NA").toLowerCase()} (${(selected.relation_type||"NA").toLowerCase()})
ЁЯУЭ Message: ${senderMessage.toLowerCase()}`;
    window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
}

// Search functionality
document.getElementById("search").addEventListener("input", e=>{
    const t=e.target.value.toLowerCase();
    const f=voters.filter(v=>
        (v.voter_full_name||"").toLowerCase().includes(t) ||
        (v.epic_no||"").toLowerCase().includes(t) ||
        (v.relation_name||"").toLowerCase().includes(t) ||
        (v.sl_no_in_part+"").includes(t) ||
        (v.house_number||"").toLowerCase().includes(t) ||
        (generalInfo.list_part_name||"").toLowerCase().includes(t) ||
        (generalInfo.list_part_no+"").includes(t)
    );
    showList(f);
});

// Language switching
function applyLanguage(lang){
    document.querySelectorAll(".label").forEach(el=>{
        const attr=(lang==="mr")?el.dataset.mr:el.dataset.en;
        if(attr!==undefined){
            if(el.tagName==="INPUT" || el.tagName==="TEXTAREA") el.placeholder=attr;
            else el.innerText=attr;
        }
    });
}
document.getElementById("lang").addEventListener("change", function(){ applyLanguage(this.value); });
applyLanguage("mr"); // Default Marathi
</script>
</body>
</html>
