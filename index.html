<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Ward 20 Management</title>

<script src="https://cdn.tailwindcss.com"></script>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<!-- Papa Parse (CSV) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>


<style>
/* 3D BUTTON */
.btn3d {
  box-shadow: 0 4px 0 #0005;
  transition: 0.1s;
}
.btn3d:active {
  transform: translateY(3px);
  box-shadow: 0 1px 0 #0005;
}
</style>
</head>

<body class="bg-gray-100">

<!-- ============================
        TOP BAR
============================ -->
<div class="flex justify-between items-center p-3 bg-blue-600 text-white shadow">

  <!-- Logo Left -->
  <div class="text-2xl font-bold flex items-center gap-2">
    <span class="bg-white text-blue-700 px-3 py-1 rounded-lg shadow font-extrabold">WARD 20</span>
  </div>

  <!-- Login Button Right -->
  <button onclick="login()"
    id="loginBtn"
    class="btn3d bg-green-500 px-4 py-2 rounded-lg font-bold shadow text-white">
    Login with Google
  </button>

</div>


<!-- ============================
        LOGIN SECTION
============================ -->
<div id="loginDiv" class="w-full h-screen flex justify-center items-center">
  <button onclick="login()"
    class="btn3d bg-blue-600 text-white px-8 py-4 text-xl rounded-xl shadow">
    Login with Google
  </button>
</div>


<!-- ============================
        MAIN CONTENT
============================ -->
<div id="mainDiv" class="hidden p-4">

  <!-- Admin Upload Screen Image -->
  <div id="adminUploadBox" class="hidden mb-4 p-4 bg-white rounded-xl shadow">
    <h2 class="font-bold text-xl mb-3">Admin: Screen Image Upload</h2>

    <input type="file" id="screenImage" accept="image/*"
      class="border p-2 rounded w-full">

    <button onclick="uploadScreenImage()"
      class="btn3d bg-purple-600 text-white w-full mt-3 p-3 rounded-lg">
      Upload Image
    </button>
  </div>

  <!-- Screen Image Show -->
  <div class="mb-4">
    <img id="displayImage"
      src=""
      class="w-full rounded-xl shadow border hidden">
  </div>


  <!-- PANELS -->
  <div id="adminPanel" class="hidden p-4 bg-white rounded-xl shadow mt-4">
    <h2 class="font-bold text-2xl mb-4">Admin Panel</h2>

    <!-- Add User -->
    <form id="addUserForm" class="grid gap-2">
      <input id="newUserName" placeholder="Name" class="border p-2 rounded">
      <input id="newUserEmail" placeholder="Email" class="border p-2 rounded">
      <select id="newUserRole" class="border p-2 rounded">
        <option value="admin">Admin</option>
        <option value="member">Member</option>
        <option value="user">User</option>
      </select>

      <button class="btn3d bg-green-600 text-white p-3 rounded-lg">Add User</button>
    </form>

    <hr class="my-4">

    <!-- CSV Import -->
    <input id="sheetCSV" placeholder="Paste CSV Sheet link" class="border p-2 rounded w-full">
    <button onclick="importVotersFromSheet()"
      class="btn3d bg-blue-500 w-full mt-3 text-white p-3 rounded-lg">
      Import Voters
    </button>

    <h3 class="font-bold mt-4">Admin Voter List</h3>
    <div id="voterListAdmin" class="mt-3"></div>
  </div>


  <!-- MEMBER PANEL -->
  <div id="memberPanel" class="hidden bg-white p-4 rounded-xl shadow mt-4">
    <h2 class="font-bold text-xl mb-3">Member Survey</h2>

    <form id="surveyForm" class="grid gap-2">
      <input id="memberName" placeholder="Name" class="border p-2 rounded">
      <input id="memberMobile" placeholder="Mobile" class="border p-2 rounded">
      <input id="memberWard" placeholder="Ward" class="border p-2 rounded">
      <input id="memberPoster" type="file" accept="image/*" class="border p-2 rounded">

      <button class="btn3d bg-indigo-600 text-white p-3 rounded-lg">Submit</button>
    </form>

    <h3 class="font-bold mt-4">Member Survey Count</h3>
    <div id="memberCount" class="mt-2"></div>
  </div>


  <!-- USER PANEL -->
  <div id="userPanel" class="hidden bg-white p-4 rounded-xl shadow mt-4">
    <h2 class="font-bold text-xl mb-3">Voter List</h2>

    <input id="searchInput" placeholder="Search voter"
      class="border p-2 rounded w-full mb-3">

    <div id="voterListUser"></div>
  </div>

</div>


<!-- Firebase Config -->
<script>
const firebaseConfig = {
  apiKey: "AIzaSyCLCUAiPz-sqhFDskG9g9AwyUI1RdTQWfk",
  authDomain: "marathi-crime-files.firebaseapp.com",
  databaseURL: "https://marathi-crime-files-default-rtdb.firebaseio.com",
  projectId: "marathi-crime-files",
  storageBucket: "marathi-crime-files.appspot.com",
  messagingSenderId: "1072547018248",
  appId: "1:1072547018248:web:f55b096275e0ee9cb8b6c7"
};
firebase.initializeApp(firebaseConfig);
</script>

<script src="app.js"></script>

</body>
</html>
