<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voter Registration & List</title>
<script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  .btn-3d {
    background: linear-gradient(145deg, #4ade80, #16a34a);
    color: white;
    font-weight: bold;
    padding: 10px 20px;
    border-radius: 10px;
    box-shadow: 0 4px #15803d;
    transition: 0.2s;
  }
  .btn-3d:active {
    box-shadow: 0 2px #15803d;
    transform: translateY(2px);
  }
</style>
</head>
<body class="bg-gray-100 p-4">

<div class="max-w-md mx-auto bg-white p-6 rounded-xl shadow-lg mb-6">
<h2 class="text-2xl font-bold mb-4 text-center">Voter Registration</h2>

<form id="regForm" class="space-y-4">
  <input type="text" id="name" placeholder="Name" required class="w-full border p-2 rounded-md">
  <input type="text" id="address" placeholder="Address" required class="w-full border p-2 rounded-md">
  <input type="text" id="mobile" placeholder="Mobile No" required class="w-full border p-2 rounded-md">
  <input type="text" id="epic" placeholder="EPIC / Voter ID" required class="w-full border p-2 rounded-md">
  <button type="submit" class="btn-3d w-full text-lg">Register</button>
</form>
</div>

<div class="max-w-3xl mx-auto bg-white p-6 rounded-xl shadow-lg">
<h2 class="text-2xl font-bold mb-4 text-center">Voter List</h2>
<table class="w-full table-auto border-collapse border border-gray-300">
  <thead class="bg-gray-200">
    <tr>
      <th class="border px-2 py-1">Name</th>
      <th class="border px-2 py-1">Address</th>
      <th class="border px-2 py-1">Mobile</th>
      <th class="border px-2 py-1">EPIC</th>
    </tr>
  </thead>
  <tbody id="voterList" class="text-center"></tbody>
</table>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCdjqVFKOQ1dtaXCGFUUtsJWbFdGNTo-xw",
  authDomain: "voter-25c94.firebaseapp.com",
  databaseURL: "https://voter-25c94-default-rtdb.firebaseio.com",
  projectId: "voter-25c94",
  storageBucket: "voter-25c94.appspot.com",
  messagingSenderId: "297773534400",
  appId: "1:297773534400:web:3722c487b8c83e9b787125"
};


  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const regForm = document.getElementById("regForm");
  const voterList = document.getElementById("voterList");

  // ðŸ”¹ Register voter
  regForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    const name = document.getElementById("name").value;
    const address = document.getElementById("address").value;
    const mobile = document.getElementById("mobile").value;
    const epic = document.getElementById("epic").value;

    await addDoc(collection(db, "voters"), { name, address, mobile, epic });
    alert("Voter registered!");
    regForm.reset();
    loadVoterList();
  });

  // ðŸ”¹ Load voter list
  async function loadVoterList() {
    voterList.innerHTML = "";
    const querySnapshot = await getDocs(collection(db, "voters"));
    querySnapshot.forEach(docSnap => {
      const data = docSnap.data();
      voterList.innerHTML += `
        <tr>
          <td class="border px-2 py-1">${data.name}</td>
          <td class="border px-2 py-1">${data.address}</td>
          <td class="border px-2 py-1">${data.mobile}</td>
          <td class="border px-2 py-1">${data.epic}</td>
        </tr>
      `;
    });
  }

  loadVoterList();
</script>
</body>
</html>
