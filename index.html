<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Voter Panel - Ward 20</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; margin:0; padding:0.5rem;
           background: linear-gradient(to bottom right, #4f46e5, #ec4899, #facc15);}
    img.panel-img { max-width:90%; height:auto; border-radius:1rem; box-shadow:0 8px 20px rgba(0,0,0,0.3); margin-bottom:2rem;}
    .btn-3d { padding:0.75rem 1.5rem; margin:0.5rem; border:none; border-radius:0.75rem; font-weight:bold; color:white; cursor:pointer;
              transition:0.1s; box-shadow:0 5px 0 rgba(0,0,0,0.25);}
    .btn-3d:hover{transform:translateY(-2px);}
    .btn-3d:active{transform:translateY(3px); box-shadow:0 2px 0 rgba(0,0,0,0.25);}
    .btn1{background-color:#3b82f6;}
    .btn2{background-color:#ef4444;}
    .btn3{background-color:#f59e0b;}
    .btn4{background-color:#10b981;}
    .login-btn{position:absolute; top:1rem; right:1rem; padding:0.5rem 1rem; font-weight:bold; border-radius:0.75rem;
               background-color:white; color:#1f2937; display:flex; align-items:center; gap:0.5rem; box-shadow:0 5px 0 rgba(0,0,0,0.25);}
  </style>
</head>
<body>

<div id="content" style="display:none;">
  <!-- Login Button -->
  <button id="loginBtn" class="login-btn">
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" style="width:20px;height:20px;">
    Login
  </button>

  <!-- Panel Image -->
  <img src="https://i.postimg.cc/qRYkB8VT/khatik-imase.jpg" class="panel-img" />

  <!-- Buttons -->
  <div class="flex flex-wrap justify-center">
    <button class="btn-3d btn1">Button 1</button>
    <button class="btn-3d btn2">Button 2</button>
    <button class="btn-3d btn3">Button 3</button>
    <button class="btn-3d btn4">Button 4</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCdjqVFKOQ1dtaXCGFUUtsJWbFdGNTo-xw",
  authDomain: "voter-25c94.firebaseapp.com",
  databaseURL: "https://voter-25c94-default-rtdb.firebaseio.com",
  projectId: "voter-25c94",
  storageBucket: "voter-25c94.firebasestorage.app",
  messagingSenderId: "297773534400",
  appId: "1:297773534400:web:3722c487b8c83e9b787125"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const provider = new GoogleAuthProvider();

// Check login first
onAuthStateChanged(auth, user => {
  if(!user){
    // redirect to index.html if not logged in
    window.location.href = 'index.html';
  } else {
    // Show panel content only after login
    document.getElementById('content').style.display = 'block';
  }
});

// Login button
const loginBtn = document.getElementById('loginBtn');
loginBtn.addEventListener('click', async () => {
  try{
    await signInWithPopup(auth, provider);
  }catch(e){
    alert("Login failed");
    console.error(e);
  }
});
</script>

</body>
</html>
