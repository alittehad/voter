<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Voter App 2025</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js"></script>

<!-- Manifest -->
<link rel="manifest" href="manifest.json">

<style>
body {
  text-align: center;
  background: white;
  font-family: Arial, sans-serif;
}

h2 {
  margin-top: 40px;
  font-size: 25px;
}

.google-login {
  margin-top: 20px;
  padding: 12px 25px;
  background: linear-gradient(45deg, #ff3d00, #ffea00, #00e676, #2979ff);
  border: none;
  border-radius: 12px;
  font-size: 18px;
  font-weight: bold;
  color: white;
  box-shadow: 0px 5px 10px rgba(0,0,0,0.4);
  cursor: pointer;
  transition: 0.3s;
}

.google-login:hover {
  transform: scale(1.1);
}

#installBtn {
  margin-top: 20px;
  padding: 12px 25px;
  background: linear-gradient(45deg, #00e5ff, #651fff, #ff1744);
  border: none;
  border-radius: 12px;
  font-size: 18px;
  color: white;
  font-weight: bold;
  display: none;
  box-shadow: 0px 5px 10px rgba(0,0,0,0.4);
  cursor: pointer;
  transition: 0.3s;
}

#installBtn:hover {
  transform: scale(1.1);
}
</style>
</head>
<body>

<h2>ðŸ—³ Sachin Desai For Ward 8</h2>

<button class="google-login" onclick="login()">Google Login</button>

<button id="installBtn">ðŸ“² Install App</button>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCdjqVFKOQ1dtaXCGFUUtsJWbFdGNTo-xw",
  authDomain: "voter-25c94.firebaseapp.com",
  projectId: "voter-25c94",
  storageBucket: "voter-25c94.appspot.com",
  messagingSenderId: "297773534400",
  appId: "1:297773534400:web:3722c487b8c83e9b787125"
};

// Init Firebase
const app = firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// Google Login
function login() {
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider).then(() => {
    window.location.href = "home.html";
  });
}

// --- PWA Button ---
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener("click", async () => {
  installBtn.style.display = "none";
  deferredPrompt.prompt();
  await deferredPrompt.userChoice;
});
</script>

<!-- Service Worker -->
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
