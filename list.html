<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Voter List Preview (Local Data)</title>
<style>
body { font-family: Arial; margin:0; padding:10px; background:#f3f3f3; }
h2 { text-align:center; margin-bottom:10px; font-size:16px; text-transform: lowercase; }
input, textarea, select {
    width:100%; padding:8px; margin-bottom:8px;
    border-radius:6px; border:1px solid #777; font-size:14px;
    text-transform: lowercase;
}
.list-item{
    padding:6px 8px; background:white;
    border:1px solid #aaa; margin-bottom:4px;
    border-radius:6px; cursor:pointer;
    transition:.2s; font-size:12px;
    text-transform: lowercase; line-height:1.3em;
    word-break: break-word;
}
.highlight { background: #ffe08a !important; border-color:#d6a300 !important; }
.list-item:hover{ transform:scale(1.03); box-shadow:0 0 6px gray; }

#popup{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.7);display:none;
    justify-content:center;align-items:flex-start;
    padding:20px;overflow-y:auto;
}
.card{
    width:95%;max-width:420px;background:white;
    border:3px solid black;border-radius:12px;padding:15px;
    font-size:13px; text-transform: lowercase;
}
.card img{
    width:100%;max-height:180px;object-fit:contain;
    border-radius:10px;margin-bottom:8px;
}
.btn{
    padding:10px;width:100%;margin-top:8px;background:#008cff;
    color:white;border:none;font-size:14px;cursor:pointer;
    border-radius:8px;box-shadow:0 3px 0 #003f7f;
}
.btn:active{ transform:translateY(3px); }
.close-btn{ background:red;box-shadow:0 3px 0 #7a0000; }
.color-btn{ background:#ffa600; box-shadow:0 3px 0 #b36b00; }

/* PRINT */
@media print{
    body *{ visibility:hidden; }
    #popup, #popup *{ visibility:visible; }
    .btn{ display:none !important; }
}
.lang-switch { text-align:center; margin-bottom:10px; }
.lang-switch select { padding:6px 10px; font-size:14px; border-radius:6px; border:1px solid #007bff; }
</style>
</head>
<body>

<div class="lang-switch">
Â  <select id="lang">
Â  Â  <option value="mr">ğŸ‡®ğŸ‡³ à¤®à¤°à¤¾à¤ à¥€ (Marathi)</option>
Â  Â  <option value="en">ğŸ‡®ğŸ‡³ English</option>
Â  </select>
</div>

<div id="translateArea">
Â  Â  <h2 class="label" data-mr="ğŸ—³ à¤®à¤¤à¤¦à¤¾à¤° à¤¯à¤¾à¤¦à¥€ à¤ªà¥‚à¤°à¥à¤µà¤¾à¤µà¤²à¥‹à¤•à¤¨" data-en="ğŸ—³ Voter List Preview">ğŸ—³ à¤®à¤¤à¤¦à¤¾à¤° à¤¯à¤¾à¤¦à¥€ à¤ªà¥‚à¤°à¥à¤µà¤¾à¤µà¤²à¥‹à¤•à¤¨</h2>
Â  Â  <label class="label" data-mr="à¤®à¤¤à¤¦à¤¾à¤¤à¤¾ à¤¶à¥‹à¤§à¤¾" data-en="Search Voter:">à¤®à¤¤à¤¦à¤¾à¤¤à¤¾ à¤¶à¥‹à¤§à¤¾</label>
</div>

<input id="search" class="label"Â 
Â  Â  Â  Â data-mr="à¤¨à¤¾à¤µ, EPIC, AC à¤•à¥à¤°., à¤­à¤¾à¤— à¤•à¥à¤°., à¤ªà¤¤à¥à¤¤à¤¾ à¤¶à¥‹à¤§à¤¾"Â 
Â  Â  Â  Â data-en="Search Name, EPIC, AC No, Part No, Address, Booth, Message..."
Â  Â  Â  Â placeholder="à¤¨à¤¾à¤µ, EPIC, AC à¤•à¥à¤°., à¤­à¤¾à¤— à¤•à¥à¤°., à¤ªà¤¤à¥à¤¤à¤¾ à¤¶à¥‹à¤§à¤¾">
<div id="list"></div>

<div id="popup">
Â  Â  <div class="card" id="cardBox">
        <h3 id="pName"></h3>
        <p><b class="label" data-mr="ğŸ†” EPIC à¤•à¥à¤°à¤®à¤¾à¤‚à¤•:" data-en="ğŸ†” EPIC:">ğŸ†” EPIC à¤•à¥à¤°à¤®à¤¾à¤‚à¤•:</b> <span id="pEpic"></span></p>
        <p><b class="label" data-mr="ğŸ› à¤µà¤¿à¤§à¤¾à¤¨à¤¸à¤­à¤¾:" data-en="ğŸ› AC No:">ğŸ› à¤µà¤¿à¤§à¤¾à¤¨à¤¸à¤­à¤¾:</b> <span id="pAc"></span></p>
        <p><b class="label" data-mr="ğŸ“ à¤­à¤¾à¤— à¤•à¥à¤°à¤®à¤¾à¤‚à¤•:" data-en="ğŸ“ Part No:">ğŸ“ à¤­à¤¾à¤— à¤•à¥à¤°à¤®à¤¾à¤‚à¤•:</b> <span id="pPart"></span></p>
        <p><b class="label" data-mr="ğŸ  à¤ªà¤¤à¤¾:" data-en="ğŸ  Address:">ğŸ  à¤ªà¤¤à¤¾:</b> <span id="pAddress"></span></p>
        <p><b class="label" data-mr="ğŸ—³ à¤®à¤¤à¤¦à¤¾à¤¨ à¤•à¥‡à¤‚à¤¦à¥à¤°:" data-en="ğŸ—³ Booth:">ğŸ—³ à¤®à¤¤à¤¦à¤¾à¤¨ à¤•à¥‡à¤‚à¤¦à¥à¤°:</b> <span id="pVoteAddress"></span></p>
        <p><b class="label" data-mr="ğŸ”— à¤¸à¤‚à¤¬à¤‚à¤§:" data-en="ğŸ”— Relation:">ğŸ”— à¤¸à¤‚à¤¬à¤‚à¤§:</b> <span id="pRelation"></span> (<span id="pRelationType"></span>)</p>
        <p><b class="label" data-mr="à¤†à¤¯à¥/à¤²à¤¿à¤‚à¤—:" data-en="Age/Gender:">à¤†à¤¯à¥/à¤²à¤¿à¤‚à¤—:</b> <span id="pAge"></span> / <span id="pGender"></span></p>

Â  Â  Â  Â  <img id="voterImage" style="display:none; margin-top:10px;">

Â  Â  Â  Â  <label class="label" data-mr="ğŸ“ à¤¸à¤‚à¤¦à¥‡à¤¶:" data-en="ğŸ“ Sender Message:"><b>ğŸ“ à¤¸à¤‚à¤¦à¥‡à¤¶:</b></label>
Â  Â  Â  Â  <input id="senderNote" placeholder="à¤¸à¤‚à¤¦à¥‡à¤¶ à¤Ÿà¤¾à¤•à¤¾ / Type message here">

Â  Â  Â  Â  <button class="btn color-btn" onclick="highlightItem()">ğŸ¨ à¤¹à¤¾à¤¯à¤²à¤¾à¤‡à¤Ÿ / Highlight</button>
Â  Â  Â  Â  <button class="btn" onclick="printDetails()">ğŸ–¨ à¤›à¤¾à¤ªà¤¾ / Print</button>
Â  Â  Â  Â  <button class="btn" onclick="sendWhatsApp()">ğŸ“© WhatsApp</button>
Â  Â  Â  Â  <button class="btn close-btn" onclick="closePopup()">âŒ à¤¬à¤‚à¤¦ à¤•à¤°à¤¾ / Close</button>
Â  Â  </div>
</div>

<script>
// --- START: LOCAL JSON DATA ---
const voterData = {
Â  "general_info": {
Â  Â  "date": "20-11-2025",
Â  Â  "corporation": "Vasai Virar Municipal Corporation",
Â  Â  "ward_no": "8 - Ward 8",
Â  Â  "list_part_no": "272",
Â  Â  "list_part_name": "1 - Dhanivgaonba-Hachapadadhanivaharwate"
Â  },
Â  "voters": [
Â  Â  {
Â  Â  Â  "serial_no": 1,
Â  Â  Â  "epic_no": "RBG4942918",
Â  Â  Â  "sl_no_in_part": "131/272/1",
Â  Â  Â  "voter_full_name": "Ansari saddam hussain",
Â  Â  Â  "relation_name": "Ansari abubakar",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 30,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 2,
Â  Â  Â  "epic_no": "MRL2020212",
Â  Â  Â  "sl_no_in_part": "131/272/2",
Â  Â  Â  "voter_full_name": "Arya jagjivan pardeshi",
Â  Â  Â  "relation_name": "Arya pardeshi",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 53,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 3,
Â  Â  Â  "epic_no": "MRL2022762",
Â  Â  Â  "sl_no_in_part": "131/272/3",
Â  Â  Â  "voter_full_name": "Arya malti devi jagjivan",
Â  Â  Â  "relation_name": "Arya jagjivan",
Â  Â  Â  "relation_type": "Husband's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 47,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 4,
Â  Â  Â  "epic_no": "RBG3601366",
Â  Â  Â  "sl_no_in_part": "131/272/4",
Â  Â  Â  "voter_full_name": "Arya ramkaran dayaram",
Â  Â  Â  "relation_name": "Arya dayaram",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 45,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 5,
Â  Â  Â  "epic_no": "RBG3601374",
Â  Â  Â  "sl_no_in_part": "131/272/5",
Â  Â  Â  "voter_full_name": "Arya rekha ramkaran",
Â  Â  Â  "relation_name": "Arya ramkaran",
Â  Â  Â  "relation_type": "Husband's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 43,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 6,
Â  Â  Â  "epic_no": "RBG5072202",
Â  Â  Â  "sl_no_in_part": "131/272/6",
Â  Â  Â  "voter_full_name": "Barf ananta balu",
Â  Â  Â  "relation_name": "Barf balu",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 28,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 7,
Â  Â  Â  "epic_no": "RBG4585816",
Â  Â  Â  "sl_no_in_part": "131/272/7",
Â  Â  Â  "voter_full_name": "Bhoir jyoti ladku",
Â  Â  Â  "relation_name": "Bhoir ladku",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 33,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 8,
Â  Â  Â  "epic_no": "RBG4997110",
Â  Â  Â  "sl_no_in_part": "131/272/8",
Â  Â  Â  "voter_full_name": "Barf naresh vishnu",
Â  Â  Â  "relation_name": "Barf vishnu",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 29,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 9,
Â  Â  Â  "epic_no": "RBG4997128",
Â  Â  Â  "sl_no_in_part": "131/272/9",
Â  Â  Â  "voter_full_name": "Bhoir geeta kathod",
Â  Â  Â  "relation_name": "Bhoir kathod",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 31,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 10,
Â  Â  Â  "epic_no": "RBG4997144",
Â  Â  Â  "sl_no_in_part": "131/272/10",
Â  Â  Â  "voter_full_name": "Bhoir rakesh ladku",
Â  Â  Â  "relation_name": "Bhoir ladku",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 30,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 11,
Â  Â  Â  "epic_no": "RBG4997136",
Â  Â  Â  "sl_no_in_part": "131/272/11",
Â  Â  Â  "voter_full_name": "Bhoir sharad ladku",
Â  Â  Â  "relation_name": "Bhoir ladku",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 33,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 12,
Â  Â  Â  "epic_no": "RBG4997466",
Â  Â  Â  "sl_no_in_part": "131/272/12",
Â  Â  Â  "voter_full_name": "Bhowar rajesh halya",
Â  Â  Â  "relation_name": "Bhowar halya",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 34,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 13,
Â  Â  Â  "epic_no": "RBG4997482",
Â  Â  Â  "sl_no_in_part": "131/272/13",
Â  Â  Â  "voter_full_name": "Bhowar rasika ravindra",
Â  Â  Â  "relation_name": "Bhowar ravindra",
Â  Â  Â  "relation_type": "Husband's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 33,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 14,
Â  Â  Â  "epic_no": "RBG4997474",
Â  Â  Â  "sl_no_in_part": "131/272/14",
Â  Â  Â  "voter_full_name": "Bhowar vinod balu",
Â  Â  Â  "relation_name": "Bhowar balu",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 33,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 15,
Â  Â  Â  "epic_no": "RBG4997540",
Â  Â  Â  "sl_no_in_part": "131/272/15",
Â  Â  Â  "voter_full_name": "Bhurkud naresh kisan",
Â  Â  Â  "relation_name": "Bhurkud kisan",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 35,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 16,
Â  Â  Â  "epic_no": "RBG4997557",
Â  Â  Â  "sl_no_in_part": "131/272/16",
Â  Â  Â  "voter_full_name": "Bhurkud nilesh lahu",
Â  Â  Â  "relation_name": "Bhurkud lahu",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 31,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 17,
Â  Â  Â  "epic_no": "RBG4384426",
Â  Â  Â  "sl_no_in_part": "131/272/17",
Â  Â  Â  "voter_full_name": "Bhuyal subhash ananta",
Â  Â  Â  "relation_name": "Bhuyal ananta",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 30,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 18,
Â  Â  Â  "epic_no": "RBG3601416",
Â  Â  Â  "sl_no_in_part": "131/272/18",
Â  Â  Â  "voter_full_name": "Chaubey rameshchandra ambikaprasad",
Â  Â  Â  "relation_name": "Chaubey ambikaprasad",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 52,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 19,
Â  Â  Â  "epic_no": "RBG3601424",
Â  Â  Â  "sl_no_in_part": "131/272/19",
Â  Â  Â  "voter_full_name": "Chaubey asha rameshchandra",
Â  Â  Â  "relation_name": "Chaubey rameshchandra",
Â  Â  Â  "relation_type": "Husband's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 39,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 20,
Â  Â  Â  "epic_no": "RBG4997490",
Â  Â  Â  "sl_no_in_part": "131/272/20",
Â  Â  Â  "voter_full_name": "Chaudhary ladka surekha",
Â  Â  Â  "relation_name": "Chaudhary surekha",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 38,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 21,
Â  Â  Â  "epic_no": "RBG4278826",
Â  Â  Â  "sl_no_in_part": "131/272/21",
Â  Â  Â  "voter_full_name": "Chaudhary madhuri vijay",
Â  Â  Â  "relation_name": "Chaudhary vijay",
Â  Â  Â  "relation_type": "Husband's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 36,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 22,
Â  Â  Â  "epic_no": "RBG4586129",
Â  Â  Â  "sl_no_in_part": "131/272/22",
Â  Â  Â  "voter_full_name": "Chaudhary pinki devi",
Â  Â  Â  "relation_name": "Chaudhary amit",
Â  Â  Â  "relation_type": "Husband's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 34,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 23,
Â  Â  Â  "epic_no": "RBG4997524",
Â  Â  Â  "sl_no_in_part": "131/272/23",
Â  Â  Â  "voter_full_name": "Chowdhury naresh ganesh",
Â  Â  Â  "relation_name": "Chaudhary ganesh",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 34,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 24,
Â  Â  Â  "epic_no": "RBG4997516",
Â  Â  Â  "sl_no_in_part": "131/272/24",
Â  Â  Â  "voter_full_name": "Chaudhary rajesh ganesh",
Â  Â  Â  "relation_name": "Chaudhary ganesh",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 31,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 25,
Â  Â  Â  "epic_no": "RBG4997508",
Â  Â  Â  "sl_no_in_part": "131/272/25",
Â  Â  Â  "voter_full_name": "Chaudhary sunil ramesh",
Â  Â  Â  "relation_name": "Chaudhary ramesh",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 28,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 26,
Â  Â  Â  "epic_no": "RBG4586194",
Â  Â  Â  "sl_no_in_part": "131/272/26",
Â  Â  Â  "voter_full_name": "Chaudhary puja santosh",
Â  Â  Â  "relation_name": "Chaudhary santosh",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 28,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 27,
Â  Â  Â  "epic_no": "RBG4586111",
Â  Â  Â  "sl_no_in_part": "131/272/27",
Â  Â  Â  "voter_full_name": "Chaudhary amit kumar",
Â  Â  Â  "relation_name": "Chaudhary vishnu prasad",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 28,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 28,
Â  Â  Â  "epic_no": "MRL2017242",
Â  Â  Â  "sl_no_in_part": "131/272/28",
Â  Â  Â  "voter_full_name": "Chaudhary anita cholelal",
Â  Â  Â  "relation_name": "Chaudhary cholelal",
Â  Â  Â  "relation_type": "Husband's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 47,
Â  Â  Â  "gender": "Female"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 29,
Â  Â  Â  "epic_no": "RBG3601200",
Â  Â  Â  "sl_no_in_part": "131/272/29",
Â  Â  Â  "voter_full_name": "Chaudhary subhash dundaya",
Â  Â  Â  "relation_name": "Chaudhary dundaya",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 45,
Â  Â  Â  "gender": "Male"
Â  Â  },
Â  Â  {
Â  Â  Â  "serial_no": 30,
Â  Â  Â  "epic_no": "MRL2022887",
Â  Â  Â  "sl_no_in_part": "131/272/30",
Â  Â  Â  "voter_full_name": "Chauhan maltidevi munsi",
Â  Â  Â  "relation_name": "Chauhan munsi",
Â  Â  Â  "relation_type": "Father's Name",
Â  Â  Â  "house_number": "NA",
Â  Â  Â  "age": 43,
Â  Â  Â  "gender": "Female",
Â  Â  Â  "note": "Possible duplicate of Hunda Kaithal"
Â  Â  }
Â  ]
};
// --- END: LOCAL JSON DATA ---

let voters = voterData.voters;
let generalInfo = voterData.general_info;
let selected = null, activeListItem = null;

// Initial list display
showList(voters);


// Show list
function showList(data){
Â  Â  const box = document.getElementById("list");
Â  Â  box.innerHTML = "";
Â  Â  if (data.length === 0) {
        box.innerHTML = '<div style="text-align:center; padding:20px; color:red;">à¤•à¥‹à¤ˆ à¤®à¤¤à¤¦à¤¾à¤¤à¤¾ à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¤¾ (No voters found).</div>';
        return;
    }
Â  Â  data.forEach(v=>{
Â  Â  Â  Â  const div = document.createElement("div");
Â  Â  Â  Â  div.className = "list-item";
        // Displaying Name, EPIC, and Part Number (combining general info and voter info for AC/Part)
Â  Â  Â  Â  div.innerHTML = `<b>${(v.voter_full_name||"").toLowerCase()}</b><br>
                        ğŸ†” ${(v.epic_no||"").toLowerCase()} | ğŸ› AC:${generalInfo.list_part_no.split('/')[0]||"NA"} | ğŸ“ Part:${generalInfo.list_part_no||"NA"}`;
        
Â  Â  Â  Â  div.onclick = ()=>{ activeListItem=div; openPopup(v); };
Â  Â  Â  Â  box.appendChild(div);
Â  Â  });
}

// Open popup
function openPopup(v){
Â  Â  selected=v;
    const acNo = v.sl_no_in_part.split('/')[0] || generalInfo.list_part_no.split('/')[0];
    const partNo = generalInfo.list_part_no;
    const votingAddress = generalInfo.list_part_name;

Â  Â  document.getElementById("pName").innerText=(v.voter_full_name||"").toLowerCase();
Â  Â  document.getElementById("pEpic").innerText=(v.epic_no||"").toLowerCase();
Â  Â  document.getElementById("pAc").innerText=acNo; // Assuming AC is the first part of sl_no_in_part
Â  Â  document.getElementById("pPart").innerText=partNo; // Using list_part_no from general info
Â  Â  document.getElementById("pAddress").innerText=(v.house_number||"NA").toLowerCase();
Â  Â  document.getElementById("pVoteAddress").innerText=(votingAddress||"NA").toLowerCase();
    document.getElementById("pRelation").innerText=(v.relation_name||"NA").toLowerCase();
    document.getElementById("pRelationType").innerText=(v.relation_type||"NA").toLowerCase();
    document.getElementById("pAge").innerText=v.age || "NA";
    document.getElementById("pGender").innerText=v.gender || "NA";

    // Since we don't have ImageURL or SenderNote in the JSON, these are placeholders
Â  Â  document.getElementById("senderNote").value="à¤•à¥‹à¤ˆ à¤¸à¤‚à¤¦à¥‡à¤¶ à¤¨à¤¹à¥€à¤‚ (No message)";
Â  Â  document.getElementById("voterImage").style.display="none";


Â  Â  document.getElementById("popup").style.display="flex";
}

// Highlight
function highlightItem(){
Â  Â  if(activeListItem) activeListItem.classList.toggle("highlight");
Â  Â  document.getElementById("cardBox").classList.toggle("highlight");
}

// Close popup
function closePopup(){ document.getElementById("popup").style.display="none"; }

// Print
function printDetails(){ window.print(); }

// WhatsApp
function sendWhatsApp(){
Â  Â  if(!selected) return;
    const acNo = selected.sl_no_in_part.split('/')[0] || generalInfo.list_part_no.split('/')[0];
    const partNo = generalInfo.list_part_no;
    const votingAddress = generalInfo.list_part_name;
    const senderMessage = document.getElementById("senderNote").value;

Â  Â  const msg=`ğŸ‘¤ Name: ${(selected.voter_full_name||"").toLowerCase()}
ğŸ†” EPIC: ${(selected.epic_no||"").toLowerCase()}
ğŸ  House No: ${(selected.house_number||"NA").toLowerCase()}
ğŸ› AC No: ${acNo}
ğŸ“ Part No: ${partNo}
ğŸ—³ Booth: ${votingAddress}
ğŸ”— Relation: ${(selected.relation_name||"NA").toLowerCase()} (${(selected.relation_type||"NA").toLowerCase()})
ğŸ“ Message: ${senderMessage.toLowerCase()}`;
Â  Â  window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
}

// Search
document.getElementById("search").addEventListener("input", e=>{
Â  Â  const t=e.target.value.toLowerCase();
Â  Â  const f=voters.filter(v=>
Â  Â  Â  Â  (v.voter_full_name||"").toLowerCase().includes(t) ||
Â  Â  Â  Â  (v.epic_no||"").toLowerCase().includes(t) ||
        (v.relation_name||"").toLowerCase().includes(t) ||
Â  Â  Â  Â  (v.sl_no_in_part+"").includes(t) ||
Â  Â  Â  Â  (v.house_number||"").toLowerCase().includes(t) ||
        // Search General Info fields as well
        (generalInfo.list_part_name||"").toLowerCase().includes(t) ||
        (generalInfo.list_part_no+"").includes(t)
Â  Â  );
Â  Â  showList(f);
});

// Language switching
function applyLanguage(lang) {
Â  document.querySelectorAll(".label").forEach(el => {
Â  Â  const attr = (lang === "mr") ? el.dataset.mr : el.dataset.en;
Â  Â  if (attr !== undefined) {
Â  Â  Â  if (el.tagName === "INPUT" || el.tagName === "TEXTAREA") el.placeholder = attr;
Â  Â  Â  else el.innerText = attr;
Â  Â  }
Â  });
}
document.getElementById("lang").addEventListener("change", function () {
Â  applyLanguage(this.value);
});
applyLanguage("mr"); // Default language set to Marathi
</script>
</body>
</html>
