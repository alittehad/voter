<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>
<style>
  html, body {
    margin:0; padding:0; height:100%; width:100%;
    font-family: Arial, sans-serif;
    overflow-x: hidden;
  }

  /* Background slider */
  body {
    background-size: cover;
    background-position: center;
    transition: background-image 1s ease-in-out;
  }

  /* Buttons container */
  .button-container {
    position: absolute;
    top:50%; left:50%;
    transform: translate(-50%, -50%);
    display:flex;
    flex-wrap: wrap;
    gap:20px;
    justify-content:center;
    width:90%;
    max-width:600px;
  }

  /* 3D Buttons */
  .btn3d {
    padding: 20px 40px;
    font-size:18px;
    font-weight:bold;
    color:#fff;
    border:none;
    border-radius:12px;
    cursor:pointer;
    box-shadow: 0 5px 0 #1c5980, 0 8px 15px rgba(0,0,0,0.4);
    transition: all 0.2s ease;
  }

  .btn3d:active {
    transform: translateY(5px);
    box-shadow: 0 2px 0 #1c5980, 0 4px 8px rgba(0,0,0,0.4);
  }

  /* Blinking animations with delay for each button */
  @keyframes blink1 { 0%,100%{background:#3498db} 50%{background:#e74c3c} }
  @keyframes blink2 { 0%,100%{background:#2ecc71} 50%{background:#f39c12} }
  @keyframes blink3 { 0%,100%{background:#9b59b6} 50%{background:#f1c40f} }
  @keyframes blink4 { 0%,100%{background:#e67e22} 50%{background:#1abc9c} }

  .blinking1 { animation: blink1 2s infinite; }
  .blinking2 { animation: blink2 2s infinite; }
  .blinking3 { animation: blink3 2s infinite; }
  .blinking4 { animation: blink4 2s infinite; }

  /* Logout button */
  #logoutBtn {
    position: absolute;
    top:20px; right:20px;
    width:50px; height:50px;
    border-radius:50%;
    padding:0;
    font-size:12px;
    text-align:center;
  }

  /* Uploaded images */
  #images {
    margin-top:20px;
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:center;
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
  }

  #images img {
    width:150px; height:150px;
    object-fit:cover;
    border-radius:10px;
  }

</style>
</head>
<body>

<!-- Logout -->
<button id="logoutBtn" class="btn3d">Logout</button>

<!-- Buttons -->
<div class="button-container">
  <button class="btn3d blinking1" onclick="buttonClick('https://electoralsearch.eci.gov.in/=')">Election Search</button>
  <button class="btn3d blinking2" onclick="buttonClick('https://mahasecvoterlist.in/ObjectionOnClick/SearchVoterName=')">Voter Name Search</button>
  <button class="btn3d blinking3" onclick="openCloudinaryUpload()">Upload Image</button>
  <button class="btn3d blinking4" onclick="buttonClick('print.html')">Print Page</button>
</div>

<!-- Uploaded images -->
<div id="images"></div>

<!-- Button click sound -->
<audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3" preload="auto"></audio>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCdjqVFKOQ1dtaXCGFUUtsJWbFdGNTo-xw",
    authDomain: "voter-25c94.firebaseapp.com",
    databaseURL: "https://voter-25c94-default-rtdb.firebaseio.com",
    projectId: "voter-25c94",
    storageBucket: "voter-25c94.appspot.com"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // Check login
  auth.onAuthStateChanged(user => {
    if (!user) window.location.href='index.html';
  });

  // Logout
  document.getElementById('logoutBtn').addEventListener('click', () => {
    const sound = document.getElementById('clickSound');
    sound.play();
    auth.signOut().then(()=> window.location.href='index.html');
  });

  // Button click with sound and link
  function buttonClick(url){
    const sound = document.getElementById('clickSound');
    sound.play();
    setTimeout(()=> window.open(url, '_blank'), 150);
  }

  // Cloudinary Upload
  function openCloudinaryUpload(){
    const sound = document.getElementById('clickSound');
    sound.play();

    const fileInput = document.createElement('input');
    fileInput.type='file';
    fileInput.accept='image/*';
    fileInput.onchange = () => {
      const file = fileInput.files[0];
      if(!file) return;

      const cloudName = 'YOUR_CLOUD_NAME';
      const unsignedUploadPreset = 'dlsqxs7zl';
      const url = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;

      const formData = new FormData();
      formData.append('file', file);
      formData.append('upload_preset', unsignedUploadPreset);

      fetch(url,{method:'POST', body:formData})
        .then(res=>res.json())
        .then(data=>{
          if(data.secure_url){
            const imagesDiv = document.getElementById('images');
            const img = document.createElement('img');
            img.src = data.secure_url;
            imagesDiv.appendChild(img);
          } else { alert("Upload failed"); }
        }).catch(err=>alert(err));
    };
    fileInput.click();
  }

  // Background slider
  const bgImages = [
    "https://i.ibb.co/FLQDzSGp/1.avif",
    "https://i.ibb.co/HTKycbLy/2.webp",
    "https://i.ibb.co/hRRS9vTM/3.jpg",
    "https://i.ibb.co/hFtvv9bk/4.avif",
    "https://i.ibb.co/pBfjvXSx/5.jpg"
  ];
  let bgIndex = 0;
  function changeBackground(){
    document.body.style.backgroundImage = `url(${bgImages[bgIndex]})`;
    bgIndex = (bgIndex+1)%bgImages.length;
  }
  changeBackground();
  setInterval(changeBackground, 5000); // change every 5 sec

</script>
</body>
</html>
